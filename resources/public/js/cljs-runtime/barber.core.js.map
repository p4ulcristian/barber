{"version":3,"sources":["barber/core.cljs"],"mappings":";;;;;;;;;;;;;AAeA,AAAKA,AACH,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACC;AAQH,AAAA,AAAMC;AAAN,AACE,AAAA,AAACC,AAAaC,AAAoB,AAAA,AAAiBC;;AAErD,AAAA,AAAAC,AAAAC,AAAAC;AAAA;AAAA,AAAA,AAASC,AAAY,AAACC;;AAEtB,AAAA,AAAMC;AAAN,AACE,AAACD;;AACD,AAAAE,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACC,AAAAA,AAAAA;;AACD,AAACC;;AACD,AAAA,AAAA,AAACC,AAEC,AAAKC;AAAL,AACE,AAAMC,AAAM,AAACC,AAAqBlB,AAAOgB;AACnCG,AAAa,AAAA,AAAO,AAAA,AAAQF;AAC5BG,AAAa,AAAA,AAAcH;AAFjC,AAGE,AAACI,AAAqBC;;AACtB,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAqCJ,AACAC;AADrC,AAAA,AAAAG,AAAAA,AAACC,AAAAA,AAAAA;;AAED,AAACC,AAAqBT;AAT5B,AAYE,AAAKA;AAAL,AACE,AAACU,AAAQ,AAACR,AAAqBlB,AAAOgB;;;AAC1C,AAACW;;AACD,AAACzB","names":["barber.core/router","reitit.frontend.router.cljs$core$IFn$_invoke$arity$1","barber.core/mount-root","reagent.dom.render.cljs$core$IFn$_invoke$arity$2","barber.views/current-page","js/document","js/barber","js/barber.core","js/barber.core._start-once","barber.core/_start-once","barber.sente/start!","barber.core/init!","G__25713","re-frame.core/dispatch-sync","clerk.core/initialize!","accountant.core/configure-navigation!","path","match","reitit.frontend/match-by-path","current-page","route-params","reagent.core/after-render","clerk.core/after-render!","G__25714","re-frame.core/dispatch","clerk.core/navigate-page!","cljs.core/boolean","accountant.core/dispatch-current!"],"sourcesContent":["(ns barber.core\n  (:require\n   [reagent.core :as reagent :refer [atom]]\n   [reagent.dom :as rdom]\n   [barber.views :as views]\n   [reagent.session :as session]\n   [reitit.frontend :as reitit]\n   [clerk.core :as clerk]\n   [re-frame.core :refer [dispatch dispatch-sync subscribe]]\n   [barber.sente :as sente]\n   [barber.events] ;; These two are only required to make the compiler\n   [barber.subs]   ;; load them (see docs/App-Structure.md)\n   [barber.views]\n   [accountant.core :as accountant]))\n\n(def router\n  (reitit/router\n   [[\"/calendar\" :index]\n    [\"/items\"\n     [\"\" :items]\n     [\"/:item-id\" :item]]\n    [\"/about\" :about]]))\n\n\n(defn mount-root []\n  (rdom/render [views/current-page] (.getElementById js/document \"app\")))\n\n(defonce _start-once (sente/start!))\n\n(defn init! []\n  (sente/start!)\n  (dispatch-sync [:initialise-db])\n  (clerk/initialize!)\n  (accountant/configure-navigation!\n   {:nav-handler\n    (fn [path]\n      (let [match (reitit/match-by-path router path)\n            current-page (:name (:data  match))\n            route-params (:path-params match)]\n        (reagent/after-render clerk/after-render!)\n        (dispatch [:add-to-db {:current-page current-page\n                               :route-params route-params}])\n        (clerk/navigate-page! path)))\n\n    :path-exists?\n    (fn [path]\n      (boolean (reitit/match-by-path router path)))})\n  (accountant/dispatch-current!)\n  (mount-root))\n"]}